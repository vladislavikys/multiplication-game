<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–±–ª–∏—Ü–∞ —É–º–Ω–æ–∂–µ–Ω–∏—è - –ò–≥—Ä–∞</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // üîë –°–ü–ò–°–û–ö –ê–ö–¢–ò–í–ê–¶–ò–û–ù–ù–´–• –ö–û–î–û–í (100 —à—Ç—É–∫)
        const ACTIVATION_CODES = {
          '7A4B-9F2E': 10, '3K8D-5M1R': 10, 'Q2W6-E4RT': 10, '9P0L-K3J7': 10, 
          'H6G5-F4D8': 10, 'N1M2-V3B9': 10, 'Z7X8-C6V5': 10, 'A9S8-D7F6': 10,
          'G4H3-J2K1': 10, 'L5P6-O7I8': 10, 'U9Y8-T7R6': 10, 'E5W4-Q3A2': 10,
          'S1D2-F3G4': 10, 'H5J6-K7L8': 10, 'Z9X8-C7V6': 10, 'B5N4-M3Q2': 10,
          'W1E2-R3T4': 10, 'Y5U6-I7O8': 10, 'P9A8-S7D6': 10, 'F5G4-H3J2': 10,
          'K1L2-Z3X4': 10, 'C5V6-B7N8': 10, 'M9Q2-W3E4': 10, 'R5T6-Y7U8': 10,
          'I9O8-P7L6': 10, 'K5J4-H3G2': 10, 'F1D2-S3A4': 10, 'Q5W6-E7R8': 10,
          'T9Y8-U7I6': 10, 'O5P4-L3K2': 10, 'J1H2-G3F4': 10, 'D5S6-A7Z8': 10,
          'X9C8-V7B6': 10, 'N5M4-Q3W2': 10, 'E1R2-T3Y4': 10, 'U5I6-O7P8': 10,
          'A9S8-D7F6': 10, 'G5H4-J3K2': 10, 'L1Z2-X3C4': 10, 'V5B6-N7M8': 10,
          'Q9W8-E7R6': 10, 'T5Y4-U3I2': 10, 'O1P2-L3K4': 10, 'J5H6-G7F8': 10,
          'D9S8-A7Q6': 10, 'W5E4-R3T2': 10, 'Y1U2-I3O4': 10, 'P5A6-S7D8': 10,
          'F9G8-H7J6': 10, 'K5L4-Z3X2': 10, 'C1V2-B3N4': 10, 'M5Q6-W7E8': 10,
          'R9T8-Y7U6': 10, 'I5O4-P3L2': 10, 'K1J2-H3G4': 10, 'F5D6-S7A8': 10,
          'Q9W8-E7R6': 10, 'T5Y4-U3I2': 10, 'O1P2-L3K4': 10, 'J5H6-G7F8': 10,
          '2B7C-4M9N': 10, '6K3L-8P1Q': 10, '5R9S-2T4W': 10, '8E1F-7G3H': 10,
          '4J6K-9L2M': 10, '3N5O-7P8Q': 10, '1R2S-4T6U': 10, '9V8W-5X3Y': 10,
          '7Z2A-6B4C': 10, '3D5E-8F9G': 10, '6H4I-2J7K': 10, '5L9M-3N1O': 10,
          '8P2Q-7R4S': 10, '4T6U-9V3W': 10, '2X5Y-8Z1A': 10, '7B3C-6D5E': 10,
          '9F4G-2H8I': 10, '3J7K-5L1M': 10, '6N8O-4P9Q': 10, '2R5S-7T3U': 10,
          '8V1W-6X4Y': 10, '5Z9A-3B2C': 10, '4D7E-8F6G': 10, '9H2I-5J3K': 10,
          '7L6M-4N8O': 10, '3P1Q-9R5S': 10, '6T4U-2V7W': 10, '8X5Y-3Z9A': 10,
          '2B6C-7D4E': 10, '5F9G-8H3I': 10, '4J2K-6L7M': 10, '9N5O-3P1Q': 10,
          '7R8S-2T4U': 10, '3V6W-5X9Y': 10, '8Z4A-7B2C': 10, '6D1E-9F5G': 10,
          '2H7I-4J8K': 10, '5L3M-9N6O': 10, '8P2Q-7R1S': 10, '4T9U-3V5W': 10
        };

        function MultiplicationGame() {
          const [gameState, setGameState] = useState('activation');
          const [activationCode, setActivationCode] = useState('');
          const [gamesLeft, setGamesLeft] = useState(0);
          const [showActivation, setShowActivation] = useState(false);
          const [totalRounds, setTotalRounds] = useState(10);
          const [operations, setOperations] = useState({
            multiply: true,
            divide: false,
            add: false,
            subtract: false
          });
          const [num1, setNum1] = useState(0);
          const [num2, setNum2] = useState(0);
          const [currentOperation, setCurrentOperation] = useState('√ó');
          const [answer, setAnswer] = useState('');
          const [score, setScore] = useState(0);
          const [currentRound, setCurrentRound] = useState(0);
          const [message, setMessage] = useState('');
          const [streak, setStreak] = useState(0);
          const [bestStreak, setBestStreak] = useState(0);
          const [soundEnabled, setSoundEnabled] = useState(true);
          const [attempts, setAttempts] = useState(2);
          const [lives, setLives] = useState(2);
          const [gameHistory, setGameHistory] = useState([]);
          
          const audioContextRef = useRef(null);

          useEffect(() => {
            try {
              audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
              console.log('Audio not supported');
            }
            
            const saved = localStorage.getItem('gamesLeft');
            if (saved && parseInt(saved) > 0) {
              setGamesLeft(parseInt(saved));
              setGameState('setup');
            } else {
              setGameState('activation');
            }
          }, []);

          const toggleOperation = (op) => {
            const newOps = { ...operations, [op]: !operations[op] };
            const hasAtLeastOne = Object.values(newOps).some(v => v);
            if (hasAtLeastOne) {
              setOperations(newOps);
            }
          };

          const activateCode = () => {
            const code = activationCode.toUpperCase().trim();
            if (ACTIVATION_CODES[code]) {
              const newGamesLeft = gamesLeft + ACTIVATION_CODES[code];
              setGamesLeft(newGamesLeft);
              localStorage.setItem('gamesLeft', newGamesLeft);
              setActivationCode('');
              setShowActivation(false);
              setGameState('setup');
              alert(`‚úÖ –ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –î–æ–±–∞–≤–ª–µ–Ω–æ ${ACTIVATION_CODES[code]} –∏–≥—Ä. –í—Å–µ–≥–æ –∏–≥—Ä: ${newGamesLeft}`);
            } else {
              alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏!');
            }
          };

          const speak = (text) => {
            if (!soundEnabled) return;
            try {
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = 'ru-RU';
              utterance.rate = 0.9;
              utterance.pitch = 1.2;
              utterance.volume = 1;
              window.speechSynthesis.cancel();
              window.speechSynthesis.speak(utterance);
            } catch (e) {
              console.log('Speech not supported');
            }
          };

          const playSound = (frequency, duration, type = 'sine') => {
            if (!soundEnabled || !audioContextRef.current) return;
            try {
              const ctx = audioContextRef.current;
              const oscillator = ctx.createOscillator();
              const gainNode = ctx.createGain();
              oscillator.connect(gainNode);
              gainNode.connect(ctx.destination);
              oscillator.frequency.value = frequency;
              oscillator.type = type;
              gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
              gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
              oscillator.start(ctx.currentTime);
              oscillator.stop(ctx.currentTime + duration);
            } catch (e) {
              console.log('Sound error');
            }
          };

          const playCorrectSound = () => {
            playSound(523.25, 0.1);
            setTimeout(() => playSound(659.25, 0.1), 100);
            setTimeout(() => playSound(783.99, 0.2), 200);
          };

          const playWrongSound = () => playSound(200, 0.3, 'sawtooth');
          
          const playStreakSound = () => {
            playSound(880, 0.15);
            setTimeout(() => playSound(1046.5, 0.2), 150);
          };

          const startGame = () => {
            if (gamesLeft <= 0) {
              alert('‚ùå –£ –≤–∞—Å –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –∏–≥—Ä—ã! –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏.');
              setShowActivation(true);
              return;
            }
            
            const newGamesLeft = gamesLeft - 1;
            setGamesLeft(newGamesLeft);
            localStorage.setItem('gamesLeft', newGamesLeft);
            
            setGameState('playing');
            setScore(0);
            setCurrentRound(0);
            setStreak(0);
            setBestStreak(0);
            setGameHistory([]);
            generateQuestion();
          };

          const generateQuestion = () => {
            const activeOps = [];
            if (operations.multiply) activeOps.push('√ó');
            if (operations.divide) activeOps.push('√∑');
            if (operations.add) activeOps.push('+');
            if (operations.subtract) activeOps.push('‚àí');
            
            const op = activeOps[Math.floor(Math.random() * activeOps.length)];
            setCurrentOperation(op);
            
            let n1, n2;
            if (op === '√∑') {
              n2 = Math.floor(Math.random() * 9) + 2;
              const result = Math.floor(Math.random() * 10) + 1;
              n1 = n2 * result;
            } else if (op === '‚àí') {
              n1 = Math.floor(Math.random() * 10) + 11;
              n2 = Math.floor(Math.random() * 10) + 1;
              if (n2 >= n1) n2 = n1 - 1;
            } else {
              n1 = Math.floor(Math.random() * 10) + 1;
              n2 = Math.floor(Math.random() * 10) + 1;
            }
            
            setNum1(n1);
            setNum2(n2);
            setAnswer('');
            setMessage('');
            setAttempts(2);
            setLives(2);
          };

          const calculateCorrectAnswer = () => {
            switch(currentOperation) {
              case '√ó': return num1 * num2;
              case '√∑': return num1 / num2;
              case '+': return num1 + num2;
              case '‚àí': return num1 - num2;
              default: return 0;
            }
          };

          const showResults = () => {
            setGameState('results');
          };

          const checkAnswer = () => {
            const userAnswer = parseInt(answer);
            const correctAnswer = calculateCorrectAnswer();
            const isCorrect = userAnswer === correctAnswer;
            
            if (isCorrect) {
              playCorrectSound();
              speak('–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –¢—ã –º–æ–ª–æ–¥–µ—Ü!');
              setScore(score + 1);
              setStreak(streak + 1);
              if (streak + 1 > bestStreak) setBestStreak(streak + 1);
              if ((streak + 1) % 5 === 0) setTimeout(playStreakSound, 300);
              setMessage('üéâ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –¢—ã –º–æ–ª–æ–¥–µ—Ü!');
              
              const existingWrong = gameHistory.find(h => h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect);
              setGameHistory([...gameHistory.filter(h => !(h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect)), {
                question: `${num1} ${currentOperation} ${num2}`,
                userAnswer,
                correctAnswer,
                isCorrect: true,
                wrongAnswers: existingWrong?.wrongAnswers || []
              }]);
              
              const nextRound = currentRound + 1;
              setCurrentRound(nextRound);
              if (nextRound >= totalRounds) {
                setTimeout(() => showResults(), 2000);
              } else {
                setTimeout(generateQuestion, 2000);
              }
            } else {
              if (attempts > 0) {
                playWrongSound();
                speak('–ü–æ–¥—É–º–∞–π –µ—â—ë');
                setAttempts(attempts - 1);
                setLives(lives - 1);
                setMessage('ü§î –ü–æ–¥—É–º–∞–π –µ—â—ë');
                
                const existingEntry = gameHistory.find(h => h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect);
                const wrongAnswers = existingEntry?.wrongAnswers ? [...existingEntry.wrongAnswers, userAnswer] : [userAnswer];
                setGameHistory([...gameHistory.filter(h => !(h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect)), {
                  question: `${num1} ${currentOperation} ${num2}`,
                  userAnswer,
                  correctAnswer,
                  isCorrect: false,
                  wrongAnswers
                }]);
                setAnswer('');
              } else {
                playWrongSound();
                speak(`–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ${correctAnswer}`);
                setStreak(0);
                setMessage(`‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}`);
                
                const existingEntry = gameHistory.find(h => h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect);
                const wrongAnswers = existingEntry?.wrongAnswers ? [...existingEntry.wrongAnswers, userAnswer] : [userAnswer];
                setGameHistory([...gameHistory.filter(h => !(h.question === `${num1} ${currentOperation} ${num2}` && !h.isCorrect)), {
                  question: `${num1} ${currentOperation} ${num2}`,
                  userAnswer,
                  correctAnswer,
                  isCorrect: false,
                  wrongAnswers
                }]);
                
                const nextRound = currentRound + 1;
                setCurrentRound(nextRound);
                if (nextRound >= totalRounds) {
                  setTimeout(() => showResults(), 2500);
                } else {
                  setTimeout(generateQuestion, 2500);
                }
              }
            }
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter' && answer !== '') checkAnswer();
          };

          const handleActivationKeyPress = (e) => {
            if (e.key === 'Enter' && activationCode !== '') activateCode();
          };

          const resetGame = () => {
            setGameState('setup');
            setTotalRounds(10);
          };

          const percentage = totalRounds > 0 ? Math.round((score / totalRounds) * 100) : 0;

          const mathBg = {
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='5' y='20' font-size='20' fill='%23e0e7ff' opacity='0.3'%3E+%3C/text%3E%3Ctext x='35' y='45' font-size='20' fill='%23ddd6fe' opacity='0.3'%3E√ó%3C/text%3E%3Ctext x='15' y='50' font-size='18' fill='%23fce7f3' opacity='0.3'%3E=%3C/text%3E%3C/svg%3E")`,
            backgroundSize: '60px 60px'
          };

          if (gameState === 'activation') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-200 via-pink-200 to-blue-200 flex items-center justify-center p-4" style={mathBg}>
                <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-red-400">
                  <div className="text-center mb-8">
                    <div className="text-6xl mb-4">üîê</div>
                    <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-orange-600 mb-2">
                      –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
                    </h1>
                    <p className="text-gray-700 font-bold text-lg mb-4">–£ –≤–∞—Å 0 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–≥—Ä</p>
                    <p className="text-gray-600 text-sm">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã</p>
                  </div>

                  <div className="mb-6">
                    <input
                      type="text"
                      value={activationCode}
                      onChange={(e) => setActivationCode(e.target.value.toUpperCase())}
                      onKeyPress={handleActivationKeyPress}
                      placeholder="XXXX-XXXX"
                      maxLength="9"
                      className="w-full text-3xl text-center border-4 border-red-300 rounded-2xl p-4 focus:outline-none focus:border-red-500 font-bold uppercase tracking-widest"
                      autoFocus
                    />
                  </div>

                  <button
                    onClick={activateCode}
                    className="w-full bg-gradient-to-r from-red-500 to-orange-500 text-white text-2xl font-black py-5 rounded-2xl hover:from-red-600 hover:to-orange-600 transition-all transform hover:scale-105 shadow-lg mb-4"
                  >
                    –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨
                  </button>

                  <div className="bg-blue-50 border-2 border-blue-300 rounded-xl p-4 text-sm text-blue-800">
                    <p className="font-bold mb-2">‚ÑπÔ∏è –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥?</p>
                    <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∫–æ–¥–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏. –ö–∞–∂–¥—ã–π –∫–æ–¥ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ 10 –∏–≥—Ä–∞–º.</p>
                  </div>
                </div>
              </div>
            );
          }

          if (gameState === 'setup') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-200 via-pink-200 to-blue-200 flex items-center justify-center p-4" style={mathBg}>
                <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-purple-400 relative overflow-hidden">
                  <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400"></div>
                  
                  <div className="absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-full font-bold shadow-lg">
                    üéÆ –ò–≥—Ä: {gamesLeft}
                  </div>

                  {showActivation && (
                    <div className="mb-6 bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4">
                      <p className="font-bold text-yellow-800 mb-2">üîë –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—ã:</p>
                      <input
                        type="text"
                        value={activationCode}
                        onChange={(e) => setActivationCode(e.target.value.toUpperCase())}
                        onKeyPress={handleActivationKeyPress}
                        placeholder="XXXX-XXXX"
                        maxLength="9"
                        className="w-full text-xl text-center border-2 border-yellow-400 rounded-xl p-2 mb-2 font-bold uppercase"
                      />
                      <button
                        onClick={activateCode}
                        className="w-full bg-yellow-500 text-white font-bold py-2 rounded-xl hover:bg-yellow-600"
                      >
                        –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
                      </button>
                      <button
                        onClick={() => setShowActivation(false)}
                        className="w-full mt-2 text-gray-600 font-semibold"
                      >
                        –û—Ç–º–µ–Ω–∞
                      </button>
                    </div>
                  )}
                  
                  <div className="text-center mb-8">
                    <div className="text-6xl mb-4">üî¢</div>
                    <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">
                      –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
                    </h1>
                    <p className="text-purple-600 font-bold text-lg">–í—ã–±–µ—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏!</p>
                  </div>

                  <div className="mb-6 bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-2xl border-2 border-purple-300">
                    <label className="block text-purple-800 font-bold mb-3 text-center text-lg">
                      üéØ –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏?
                    </label>
                    <div className="grid grid-cols-2 gap-3 mb-4">
                      <button
                        onClick={() => toggleOperation('multiply')}
                        className={`py-4 rounded-xl font-black text-2xl transition-all transform hover:scale-105 ${
                          operations.multiply 
                            ? 'bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg' 
                            : 'bg-white text-purple-500 border-2 border-purple-300'
                        }`}
                      >
                        √ó –£–º–Ω–æ–∂–µ–Ω–∏–µ
                      </button>
                      <button
                        onClick={() => toggleOperation('divide')}
                        className={`py-4 rounded-xl font-black text-2xl transition-all transform hover:scale-105 ${
                          operations.divide 
                            ? 'bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg' 
                            : 'bg-white text-blue-500 border-2 border-blue-300'
                        }`}
                      >
                        √∑ –î–µ–ª–µ–Ω–∏–µ
                      </button>
                      <button
                        onClick={() => toggleOperation('add')}
                        className={`py-4 rounded-xl font-black text-2xl transition-all transform hover:scale-105 ${
                          operations.add 
                            ? 'bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg' 
                            : 'bg-white text-green-500 border-2 border-green-300'
                        }`}
                      >
                        + –°–ª–æ–∂–µ–Ω–∏–µ
                      </button>
                      <button
                        onClick={() => toggleOperation('subtract')}
                        className={`py-4 rounded-xl font-black text-2xl transition-all transform hover:scale-105 ${
                          operations.subtract 
                            ? 'bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg' 
                            : 'bg-white text-orange-500 border-2 border-orange-300'
                        }`}
                      >
                        ‚àí –í—ã—á–∏—Ç–∞–Ω–∏–µ
                      </button>
                    </div>
                  </div>

                  <div className="mb-6 bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-2xl border-2 border-purple-300">
                    <label className="block text-purple-800 font-bold mb-3 text-center text-lg">
                      üìù –°–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤?
                    </label>
                    <div className="text-center mb-4">
                      <span className="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                        {totalRounds}
                      </span>
                    </div>
                    <input
                      type="range"
                      value={totalRounds}
                      onChange={(e) => setTotalRounds(parseInt(e.target.value))}
                      min="5"
                      max="50"
                      step="5"
                      className="w-full h-4 rounded-full appearance-none cursor-pointer"
                      style={{
                        background: `linear-gradient(to right, #a855f7 0%, #ec4899 ${(totalRounds - 5) / 45 * 100}%, #e9d5ff ${(totalRounds - 5) / 45 * 100}%, #fce7f3 100%)`
                      }}
                    />
                    <div className="flex justify-between text-sm text-purple-600 mt-2 font-semibold">
                      <span>5</span>
                      <span>25</span>
                      <span>50</span>
                    </div>
                  </div>

                  <button
                    onClick={startGame}
                    className="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 text-white text-2xl font-black py-5 rounded-2xl hover:from-purple-600 hover:via-pink-600 hover:to-purple-600 transition-all transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg mb-4"
                  >
                    ‚ñ∂ –ü–û–ï–•–ê–õ–ò!
                  </button>

                  <button
                    onClick={() => setShowActivation(!showActivation)}
                    className="w-full bg-gray-200 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-300"
                  >
                    üîë –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—ã
                  </button>
                </div>
              </div>
            );
          }

          if (gameState === 'results') {
            const grade = percentage >= 90 ? 'üèÜ' : percentage >= 70 ? '‚≠ê' : percentage >= 50 ? 'üëç' : 'üí™';
            
            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-200 via-pink-200 to-blue-200 flex items-center justify-center p-4" style={mathBg}>
                <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full border-4 border-purple-400 relative overflow-hidden">
                  <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400"></div>
                  
                  <div className="absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-full font-bold shadow-lg">
                    üéÆ –û—Å—Ç–∞–ª–æ—Å—å: {gamesLeft}
                  </div>
                  
                  <div className="text-center mb-6">
                    <div className="text-8xl mb-4">{grade}</div>
                    <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">
                      –ò–≥—Ä–∞ –ó–∞–≤–µ—Ä—à–µ–Ω–∞!
                    </h1>
                    <p className="text-2xl font-bold text-purple-600">
                      {percentage >= 90 ? '–û—Ç–ª–∏—á–Ω–æ!' : percentage >= 70 ? '–•–æ—Ä–æ—à–æ!' : percentage >= 50 ? '–ù–µ–ø–ª–æ—Ö–æ!' : '–ü—Ä–æ–¥–æ–ª–∂–∞–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!'}
                    </p>
                  </div>

                  <div className="grid grid-cols-3 gap-4 mb-6">
                    <div className="bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl p-4 text-center shadow-lg">
<div className="text-4xl font-black text-white">{score}</div>
<div className="text-sm font-bold text-white">‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
</div>
<div className="bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl p-4 text-center shadow-lg">
<div className="text-4xl font-black text-white">{totalRounds}</div>
<div className="text-sm font-bold text-white">üìù –í—Å–µ–≥–æ</div>
</div>
<div className="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-4 text-center shadow-lg">
<div className="text-4xl font-black text-white">{percentage}%</div>
<div className="text-sm font-bold text-white">üìä –ü—Ä–æ—Ü–µ–Ω—Ç</div>
</div>
</div>
<div className="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-4 mb-6 border-2 border-purple-300">
                <div className="text-center text-xl font-black text-purple-700">
                  ‚≠ê –õ—É—á—à–∞—è —Å–µ—Ä–∏—è: {bestStreak} –ø–æ–¥—Ä—è–¥! ‚≠ê
                </div>
              </div>

              <div className="mb-6 max-h-80 overflow-y-auto bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-300">
                <h3 className="font-black text-purple-700 mb-3 text-center text-xl">
                  ‚ú® –¢–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: ‚ú®
                </h3>
                <div className="space-y-2">
                  {gameHistory.map((item, index) => (
                    <div key={index} className={`flex justify-between items-center py-3 px-4 rounded-xl shadow-md font-bold text-lg ${
                      item.isCorrect ? 'bg-gradient-to-r from-green-100 to-emerald-100 border-2 border-green-400' : 'bg-gradient-to-r from-red-100 to-rose-100 border-2 border-red-400'
                    }`}>
                      <span className="text-purple-900">
                        {index + 1}. {item.question} = {item.correctAnswer}
                      </span>
                      <div className="flex items-center gap-2">
                        {!item.isCorrect && item.wrongAnswers && item.wrongAnswers.length > 0 && (
                          <span className="text-sm text-red-600 bg-red-50 px-2 py-1 rounded border border-red-300">
                            –ü–æ–ø—ã—Ç–∫–∏: {item.wrongAnswers.join(', ')}
                          </span>
                        )}
                        <span className={`text-2xl ${item.isCorrect ? 'text-green-600' : 'text-red-600'}`}>
                          {item.isCorrect ? '‚úì' : '‚úó'}
                        </span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <button
                onClick={resetGame}
                className="w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 text-white font-black py-5 text-xl rounded-2xl hover:from-purple-600 hover:via-pink-600 hover:to-purple-600 transition-all shadow-lg"
              >
                üîÑ –ò–ì–†–ê–¢–¨ –°–ù–û–í–ê!
              </button>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-200 via-pink-200 to-blue-200 flex items-center justify-center p-4" style={mathBg}>
          <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-purple-400 relative overflow-hidden">
            <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400"></div>
            
            <div className="text-center mb-6">
              <div className="flex items-center justify-between mb-2">
                <div className="flex-1"></div>
                <h1 className="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 flex-1">
                  üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ üî¢
                </h1>
                <button
                  onClick={() => setSoundEnabled(!soundEnabled)}
                  className="flex-1 flex justify-end text-3xl"
                  style={{background: 'none', border: 'none', cursor: 'pointer'}}
                >
                  {soundEnabled ? 'üîä' : 'üîá'}
                </button>
              </div>
              <p className="text-purple-600 font-bold text-lg">–ü—Ä–∏–º–µ—Ä {currentRound + 1} –∏–∑ {totalRounds}</p>
            </div>

            <div className="grid grid-cols-3 gap-3 mb-6">
              <div className="bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl p-3 text-center shadow-lg">
                <div className="text-2xl font-black text-white">{score}</div>
                <div className="text-xs font-bold text-white">‚úì –í–µ—Ä–Ω–æ</div>
              </div>
              <div className="bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl p-3 text-center shadow-lg">
                <div className="text-2xl font-black text-white">{currentRound}</div>
                <div className="text-xs font-bold text-white">üìù –†–µ—à–µ–Ω–æ</div>
              </div>
              <div className="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-3 text-center shadow-lg">
                <div className="text-2xl font-black text-white">{percentage}%</div>
                <div className="text-xs font-bold text-white">üìä</div>
              </div>
            </div>

            <div className="flex items-center justify-center gap-2 mb-6 bg-gradient-to-r from-yellow-100 to-orange-100 p-3 rounded-2xl border-2 border-yellow-400 shadow-inner">
              <span className="text-2xl">‚≠ê</span>
              <span className="text-lg font-black text-orange-700">
                –°–µ—Ä–∏—è: {streak} üî•
              </span>
              {bestStreak > 0 && (
                <span className="text-sm font-bold text-orange-600 ml-2">
                  (–º–∞–∫—Å: {bestStreak})
                </span>
              )}
            </div>

            <div className="bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 rounded-3xl p-6 mb-6 border-3 border-purple-300 shadow-xl">
              <div className="flex justify-center gap-3 mb-4">
                {[...Array(2)].map((_, i) => (
                  <span key={i} className="text-4xl">
                    {lives > i ? '‚ù§Ô∏è' : 'ü§ç'}
                  </span>
                ))}
              </div>
              
              <div className="text-center mb-6 bg-white p-4 rounded-2xl border-3 border-purple-300 shadow-inner">
                <div className="flex items-center justify-center gap-3 flex-wrap">
                  <span className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                    {num1}
                  </span>
                  <span className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                    {currentOperation}
                  </span>
                  <span className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                    {num2}
                  </span>
                  <span className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                    =
                  </span>
                  <input
                    type="text"
                    inputMode="numeric"
                    pattern="[0-9]*"
                    value={answer}
                    onChange={(e) => {
                      const value = e.target.value.replace(/[^0-9]/g, '');
                      setAnswer(value);
                    }}
                    onKeyPress={handleKeyPress}
                    className="w-24 text-5xl text-center border-4 border-purple-400 rounded-xl p-2 focus:outline-none focus:border-pink-500 font-black text-purple-700 bg-yellow-50 shadow-lg"
                    placeholder="?"
                    autoFocus
                  />
                </div>
              </div>

              <button
                onClick={checkAnswer}
                disabled={answer === ''}
                className="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 text-white text-xl font-black py-4 rounded-2xl hover:from-purple-600 hover:via-pink-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg"
              >
                –ü–†–û–í–ï–†–ò–¢–¨ ‚ú®
              </button>
            </div>

            {message && (
              <div className={`text-center text-xl font-black mb-4 p-4 rounded-2xl border-3 shadow-lg ${
                message.includes('–ü—Ä–∞–≤–∏–ª—å–Ω–æ') 
                  ? 'bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-400' 
                  : message.includes('–ü–æ–¥—É–º–∞–π')
                  ? 'bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 border-yellow-400'
                  : 'bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-400'
              }`}>
                {message}
              </div>
            )}

            {score >= 5 && currentRound < totalRounds && (
              <div className="mt-6 text-center bg-gradient-to-r from-yellow-100 to-orange-100 p-4 rounded-2xl border-2 border-yellow-400 shadow-lg">
                <div className="text-4xl mb-2">üèÜ</div>
                <div className="text-yellow-800 font-black text-lg">
                  ‚≠ê –°—É–ø–µ—Ä! –¢—ã –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è! ‚≠ê
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(MultiplicationGame));
</script>
</body>
</html>
